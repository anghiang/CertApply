<!doctype html>
<html class="no-js" lang="zxx">

<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>MiCoach - Online Courses HTML5 Template</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="manifest" href="site.webmanifest">
	<link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">
	<link rel="stylesheet" href="./assets/css/index.css">
	<!-- Place favicon.ico in the root directory -->

	<!-- CSS here -->
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/css/owl.carousel.min.css">
	<link rel="stylesheet" href="assets/css/animate.min.css">
	<link rel="stylesheet" href="assets/css/magnific-popup.css">
	<link rel="stylesheet" href="assets/css/nice-select.css">
	<link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
	<link rel="stylesheet" href="assets/css/themify-icons.css">
	<link rel="stylesheet" href="assets/css/metisMenu.css">
	<link rel="stylesheet" href="assets/css/meanmenu.css">
	<link rel="stylesheet" href="assets/css/slick.css">
	<link rel="stylesheet" href="assets/css/main.css">
	<link rel="stylesheet" href="assets/css/verify.css">
	<link rel="stylesheet" href="assets/css/preview.css">
	<link rel="stylesheet" href="assets/fonts/icon/iconfont.css">
	<style>
		.align-items-center{
			margin-top: 20px;
		}
	</style>
</head>

<body>

<!-- header-start -->
<header class="header-transparent header-transparent-02">
	<div id="sticky-header" class="main-menu-area menu-padding pl-55 pr-55">
		<div class="container custom-container">
			<div class="row align-items-center">
				<div class="col-xl-1 col-lg-1 col-md-1 col-1">
					<div class="row logo">
						<div class="col-xl-1 col-lg-1 col-md-1 col-1">
							<img src="assets/image/logo.png">
						</div>

					</div>
				</div>
				<div class="col-xl-3 col-lg-6 col-md-11 col-9" style="margin-top: 9px;">
					<div class="row logo">
						<div class="col-xl-5 col-lg-5 col-md-5 col-5">
							<h2 style="color: aliceblue;">BlockCertify</h2>
						</div>
					</div>
				</div>


			</div>
		</div>
	</div>
</header>


<div class="course-cat-area-02 blue-dark-bg pt-130 pb-100">
	<div class="container">
		<div class="row">
			<div class="col-xl-10 col-lg-10 offset-1 previewArea" id="fileArea">
				<div class="row marg" id="certName">
					<div class="col-xl-10" id="">
						<h5 id="CertName">江西软件大学毕业证书</h5>
					</div>
					<div class="col-xl-2" id="">
						<a href="javascript:void(0)" id="modify"><span class="iconfont icon-xiugai"></span></a>
					</div>
				</div>

				<div class="row meta">
					<div class="col-xl-3">
						<span>姓名</span>
					</div>
					<div class="col-xl-3">
						：<span id="UserName">杨志刚</span>
					</div>
					<div class="col-xl-3" id="dateBox">
						<span>颁发日期</span>
					</div>
					<div class="col-xl-3" id="dateBox">
						：<span id="IssueDate">2023-4-8</span>
					</div>
				</div>

				<div class="row meta">
					<div class="col-xl-3">
						<span>有效期</span>
					</div>
					<div class="col-xl-3">
						：<span id="ValidityPeriod">4</span>
					</div>
					<div class="col-xl-3" id="dateBox">
						<span>颁发机构</span>
					</div>
					<div class="col-xl-3" id="dateBox">
						：<span id="AgencyName">江西软件大学</span>
					</div>
				</div>



				<div class="row " id="creditTitle">
					<div class="col-xl-3">
						<h5>我的学分信息：</h5>
					</div>
				</div>
				<div class="row ">
					<!-- <div class="col-xl-4 col-lg-3 creditInfoBox">
                            <div class="row" style="justify-content: space-around">
                                <span class="creditInfo">阿里区块链职业技能培训：</span>
                                <span>50</span>
                                <div class="form-check d-inline-block">
                                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                </div>
                            </div>
                        </div> -->
					<table class="table table-hover">
						<thead>
						<tr>
							<th scope="col">课程名称</th>
							<th scope="col">分数</th>
						</tr>
						</thead>
						<tbody>
						<tr class="cs">
							<td><span class="courseName">实践课</span> <a href="javascript:void(0)"
																		  class="hidden hide"><span class="iconfont icon-chacha cha"></span></a></td>
							<td><span class="score">120</span> <a href="javascript:void(0)"
																  class="hidden hide"><span class="iconfont icon-chacha cha"></span></a></td>
						</tr>
						<tr class="cs">
							<td><span class="courseName">服务分</span> <a href="javascript:void(0)"
																		  class="hidden hide"><span class="iconfont icon-chacha cha"></span></a></td>
							<td><span class="score">123</span> <a href="javascript:void(0)"
																  class="hidden hide"><span class="iconfont icon-chacha cha"></span></a></td>
						</tr>
						<tr class="cs">
							<td><span class="courseName">公益分</span> <a href="javascript:void(0)"
																		  class="hidden hide"><span class="iconfont icon-chacha cha"></span></a></td>
							<td><span class="score">145</span> <a href="javascript:void(0)"
																  class="hidden hide"><span class="iconfont icon-chacha cha"></span></a></td>
						</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div class="row" id="addBtn">
			<button type="button" class="btn btn-primary download">下载证书</button>
		</div>
	</div>
</div>






<!-- brand-area-end -->

<footer class="footer-area pt-65 pb-45" data-background="assets/img/bg/fot-02-bg.png">
	<div class="copyright-area copyright-area-02 mt-15 text-center pt-20 pb-20">
		<div class="row">
			<div class="col-xl-12">
				<div class="copyright-text">
					<p>Copyright © 2020 <a href="#">BDevs</a> All Rights Reserved.</p>
				</div>
			</div>
		</div>
	</div>
	</div>
</footer>

<script src="assets/js/vendor/modernizr-3.5.0.min.js"></script>
<script src="assets/js/vendor/jquery-1.12.4.min.js"></script>
<script src="assets/js/popper.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/owl.carousel.min.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/slick.min.js"></script>
<script src="assets/js/metisMenu.min.js"></script>
<script src="assets/js/jquery.meanmenu.min.js"></script>
<script src="assets/js/ajax-form.js"></script>
<script src="assets/js/wow.min.js"></script>
<script src="assets/js/waypoints.min.js"></script>
<script src="assets/js/jquery.counterup.min.js"></script>
<script src="assets/js/jquery.scrollUp.min.js"></script>
<script src="assets/js/imagesloaded.pkgd.min.js"></script>
<script src="assets/js/jquery.magnific-popup.min.js"></script>
<script src="assets/js/jquery.nice-select.js"></script>
<script src="assets/js/jquery.easypiechart.js"></script>
<script src="assets/js/plugins.js"></script>
<script src="assets/js/main.js"></script>
<script>
	class Course {
		constructor(CourseName, Score) {
			this.CourseName = CourseName;
			this.Score = Score;
		}
	}

	$("#modify").on('click', function () {
		$(".hidden").removeClass("hide")
	})

	$(".hidden").on('click', function () {
		$(this).parent().addClass("hide2")
	})
	$(".download").click(() => {
		let formData = new FormData
		formData.append('CertName', $('#CertName').text())
		formData.append('UserName', $('#UserName').text())
		formData.append('IssueDate', $('#IssueDate').text())
		formData.append('ValidityPeriod', $('#ValidityPeriod').text())
		formData.append('AgencyName', $('#AgencyName').text())
		let courses = []
		$(".cs").each(function () {
			// new Course()
			$(this).find(".courseName").text
			$(this).find(".score").text
			let c = new Course(null, null)
			if ($(this).find(".courseName").parent().attr("class") == undefined) {
				c.CourseName = $(this).find(".courseName").text()
			}
			if ($(this).find(".score").parent().attr("class") == undefined) {
				c.Score = parseFloat($(this).find(".score").text())
			}
			courses.push(c)
		})
		formData.append("Course", courses)

		let hiddenData = []
		if (!$(".hide2").length == 0) {
			$(".hide2").each(function () {
				if ($(this).find("a").prev().attr("class") == "courseName") {
					let obj = "CourseName:" + $(this).find("a").prev().text()
					hiddenData.push(obj)
				} else if ($(this).find("a").prev().attr("class") == "score") {
					let obj = "Score:" + $(this).find("a").prev().text()
					hiddenData.push(obj)
				}
			})
		}

		formData.append('HiddenData', hiddenData)

		var data = {

			CertName: $('#CertName').text(),
			UserName: $('#UserName').text(),
			IssueDate: $('#IssueDate').text(),
			ValidityPeriod: $('#ValidityPeriod').text(),
			AgencyName: $('#AgencyName').text(),
			Course: JSON.stringify(courses),
			HiddenData: JSON.stringify(hiddenData)
		};
		// console.log(JSON.stringify(data))
		$.ajax({
			url: '/download',
			type: 'POST',
			data: data,
		}).done(function (response) {
			console.log(response);
		}).fail(function (jqXHR, textStatus, errorThrown) {
			console.error(textStatus, errorThrown);
		});



	})
</script>
</body>

</html>