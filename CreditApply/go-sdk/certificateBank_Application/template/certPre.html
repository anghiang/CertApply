<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>MiCoach - Online Courses HTML5 Template</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="manifest" href="site.webmanifest">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">
    <link rel="stylesheet" href="./assets/css/index.css">
    <!-- Place favicon.ico in the root directory -->

    <!-- CSS here -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/nice-select.css">
    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/themify-icons.css">
    <link rel="stylesheet" href="assets/css/metisMenu.css">
    <link rel="stylesheet" href="assets/css/meanmenu.css">
    <link rel="stylesheet" href="assets/css/slick.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/verify.css">
    <link rel="stylesheet" href="assets/css/transcriptPre.css">
    <link rel="stylesheet" href="assets/fonts/icon/iconfont.css">
    <style>
        .align-items-center {
            margin-top: 20px;
        }
        #Signature {
            word-wrap: break-word;
        }
    </style>
</head>

<body>

<!-- header-start -->
<header class="header-transparent header-transparent-02">
    <div id="sticky-header" class="main-menu-area menu-padding pl-55 pr-55">
        <div class="container custom-container">
            <div class="row align-items-center">
                <div class="col-xl-1 col-lg-1 col-md-1 col-1">
                    <div class="row logo">
                        <div class="col-xl-1 col-lg-1 col-md-1 col-1">
                            <img src="assets/image/logo.png">
                        </div>

                    </div>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-11 col-9" style="margin-top: 9px;">
                    <div class="row logo">
                        <div class="col-xl-5 col-lg-5 col-md-5 col-5">
                            <h2 style="color: aliceblue;">BlockCertify</h2>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>
</header>


<div class="course-cat-area-02 blue-dark-bg pt-130 pb-100">
    <div class="container">
        <div class="row">
            <div class="col-xl-10 col-lg-10 offset-1 previewArea" id="preArea">
                <div class="row centerB" id="certNameBox">
                   <h2 id="CertName">{{.certificate.Metadata.CertName}}</h2>
                </div>

                <div class="row centerB" id="issueAgencyBox">
                    <span >颁发机构:</span>
                </div>
                <div class="row centerB" id="issueAgency">
                    <span id="AgencyName">{{.certificate.Agencies.AgencyName}}</span>
                </div>

                <div class="row centerB" id="userNameBox">
                    <span >授予:</span>
                </div>

                <div class="row centerB">
                    <span id="UserName">{{.certificate.Users.UserName}}</span>
                </div>

                <div class="row" id="dateBox">
                    <div class="col-lg-4 offset-2">
                        <div class="row centerSpan" >
                            <span>颁发日期</span>
                        </div>
                        <hr>
                        <div class="row centerSpan" >
                            <span id="IssueDate">{{.certificate.Metadata.IssueDate}}</span>
                        </div>
                    </div>
                    <div class="col-lg-4 ">
                        <div class="row centerSpan">
                            <span>有效期</span>
                        </div>
                        <hr>
                        <div class="row centerSpan" >
                            <span id="ValidityPeriod">{{.certificate.Metadata.ValidityPeriod}}</span>
                        </div>
                    </div>
                </div>

                <div class="row " id="otherInfo">
                    <div class="col-12 offset-1">
                        <div class="row">
                            <div class="col-xl-2">
                                <span id="CertNumT">证书编号</span>
                            </div>
                            <div class="col-xl-8">
                                <span id="CertNum">{{.certificate.Metadata.Number}}</span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xl-2">
                                <span id="AgencyAddressT">机构地址</span>
                            </div>
                            <div class="col-xl-8">
                                <span id="AgencyAddress">{{.certificate.Agencies.Address}}</span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xl-2">
                                <span id="SignatureT">签名</span>
                            </div>
                            <div class="col-xl-8">
                                <span id="Signature">{{.certificate.Metadata.Signature}}</span>
                            </div>
                        </div>

                        <input type="hidden" value="1" id="certType">
                    </div>
                </div>


            </div>
        </div>
        <div class="row" id="addBtn">
            <button type="button" class="btn btn-primary download">下载证书</button>
        </div>
    </div>
</div>


<!-- brand-area-end -->

<footer class="footer-area pt-65 pb-45" data-background="assets/img/bg/fot-02-bg.png">
    <div class="copyright-area copyright-area-02 mt-15 text-center pt-20 pb-20">
        <div class="row">
            <div class="col-xl-12">
                <div class="copyright-text">
                    <p>Copyright © 2020 <a href="#">BDevs</a> All Rights Reserved.</p>
                </div>
            </div>
        </div>
    </div>
    </div>
</footer>

<script src="assets/js/vendor/modernizr-3.5.0.min.js"></script>
<script src="assets/js/vendor/jquery-1.12.4.min.js"></script>
<script src="assets/js/popper.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/owl.carousel.min.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/slick.min.js"></script>
<script src="assets/js/metisMenu.min.js"></script>
<script src="assets/js/jquery.meanmenu.min.js"></script>
<script src="assets/js/ajax-form.js"></script>
<script src="assets/js/wow.min.js"></script>
<script src="assets/js/waypoints.min.js"></script>
<script src="assets/js/jquery.counterup.min.js"></script>
<script src="assets/js/jquery.scrollUp.min.js"></script>
<script src="assets/js/imagesloaded.pkgd.min.js"></script>
<script src="assets/js/jquery.magnific-popup.min.js"></script>
<script src="assets/js/jquery.nice-select.js"></script>
<script src="assets/js/jquery.easypiechart.js"></script>
<script src="assets/js/plugins.js"></script>
<script src="assets/js/main.js"></script>
<script>


    $(".download").click(() => {

        var data = {
            CertName: $('#CertName').text(),
            UserName: $('#UserName').text(),
            IssueDate: $('#IssueDate').text(),
            ValidityPeriod: $('#ValidityPeriod').text(),
            AgencyName: $('#AgencyName').text(),
            AgencyAddress: $('#AgencyAddress').text(),
            Signature: $('#Signature').text(),
            CertType: $("#certType").val(),
            CertNum: $('#CertNum').text(),
        };
        $.ajax({
            url: '/downloadCert',
            type: 'POST',
            data: data,
            success: function(data, textStatus, jqXHR) {
                var blob = new Blob([data], {type: 'application/octet-stream'});
                var url = window.URL.createObjectURL(blob);
                var fileName = jqXHR.getResponseHeader('fileName');
                var $a = $('<a>', {
                    href: url,
                    download: fileName,
                    style: 'display:none;'
                });
                $('body').append($a);
                $a[0].click();
                window.URL.revokeObjectURL(url);
            },
        })


    })
</script>
</body>

</html>